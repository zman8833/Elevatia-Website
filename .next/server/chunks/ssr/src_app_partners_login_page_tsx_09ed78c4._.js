module.exports=[13805,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(38246),f=a.i(71987),g=a.i(60721);a.i(30485);var h=a.i(31052),i=a.i(20237);function j(){let[a,e]=(0,c.useState)("email"),[f,j]=(0,c.useState)("login"),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(""),o=(0,d.useRouter)(),{signIn:p,signInWithApple:q,sendPhoneCode:r,verifyPhoneCode:s,linkAccountWithEmail:t}=(0,g.useAuth)(),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(null),G=(0,c.useRef)(null),H=(0,c.useRef)(null),[I,J]=(0,c.useState)(null),[K,L]=(0,c.useState)(""),[M,N]=(0,c.useState)("");(0,c.useEffect)(()=>("phone"===a&&H.current&&!G.current&&(G.current=new h.RecaptchaVerifier(i.auth,H.current,{size:"invisible",callback:()=>{}})),()=>{G.current&&(G.current.clear(),G.current=null)}),[a]);let O=a=>{a?o.push(`/partners/dashboard/${a}`):o.push("/admin/partners")},P=async a=>{a.preventDefault(),l(!0),n("");let b=await p(u,w);b.success?O(b.slug):(n(b.error||"Failed to sign in"),l(!1))},Q=async()=>{l(!0),n("");let a=await q();a.success?O(a.slug):(a.needsLinking&&a.pendingCredential?(J(a.pendingCredential),j("link-account")):n(a.error||"Failed to sign in with Apple"),l(!1))},R=async a=>{if(a.preventDefault(),!G.current)return void n("reCAPTCHA not initialized. Please refresh the page.");l(!0),n("");let b=y.trim();b.startsWith("+")||(b="+1"+b.replace(/\D/g,""));let c=await r(b,G.current);c.success&&c.confirmationResult?(F(c.confirmationResult),D(!0)):(n(c.error||"Failed to send verification code"),G.current&&(G.current.clear(),G.current=null)),l(!1)},S=async a=>{if(a.preventDefault(),!E)return void n("Please request a new verification code");l(!0),n("");let b=await s(E,A);b.success?O(b.slug):(b.needsLinking&&b.pendingCredential?(J(b.pendingCredential),j("link-account")):n(b.error||"Invalid verification code"),l(!1))},T=async a=>{if(a.preventDefault(),!I)return void n("No pending credential. Please try signing in again.");l(!0),n("");let b=await t(K,M,I);b.success?O(b.slug):(n(b.error||"Failed to link accounts"),l(!1))},U=()=>(0,b.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,b.jsxs)("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[(0,b.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,b.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"link-account"===f?"Linking...":"phone"===a&&C?"Verifying...":"Signing in..."]});return"link-account"===f?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)("svg",{className:"w-8 h-8 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Link Your Account"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Sign in with your existing partner email and password to link this sign-in method to your account."})]}),m&&(0,b.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm",children:m}),(0,b.jsxs)("form",{onSubmit:T,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"link-email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Partner Email"}),(0,b.jsx)("input",{id:"link-email",type:"email",value:K,onChange:a=>L(a.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all bg-white/80",placeholder:"you@company.com"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"link-password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,b.jsx)("input",{id:"link-password",type:"password",value:M,onChange:a=>N(a.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all bg-white/80",placeholder:"••••••••"})]}),(0,b.jsx)("button",{type:"submit",disabled:k,className:"w-full py-3 px-4 bg-gradient-to-r from-orange-500 to-yellow-500 text-white font-semibold rounded-xl hover:from-orange-600 hover:to-yellow-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:k?(0,b.jsx)(U,{}):"Link & Sign In"}),(0,b.jsx)("button",{type:"button",onClick:()=>{j("login"),J(null),L(""),N(""),n("")},className:"w-full py-2 text-sm text-gray-600 hover:text-gray-900 transition-colors",children:"Cancel"})]})]}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex rounded-xl bg-gray-100 p-1",children:[{id:"email",label:"Email",icon:(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})},{id:"apple",label:"Apple",icon:(0,b.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:(0,b.jsx)("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})})},{id:"phone",label:"Phone",icon:(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})}].map(c=>(0,b.jsxs)("button",{type:"button",onClick:()=>{e(c.id),n(""),D(!1),B(""),F(null)},className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-lg text-sm font-medium transition-all ${a===c.id?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[c.icon,c.label]},c.id))}),m&&(0,b.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm",children:m}),"email"===a&&(0,b.jsxs)("form",{onSubmit:P,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,b.jsx)("input",{id:"email",type:"email",value:u,onChange:a=>v(a.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all bg-white/80",placeholder:"you@company.com"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,b.jsx)("input",{id:"password",type:"password",value:w,onChange:a=>x(a.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all bg-white/80",placeholder:"••••••••"})]}),(0,b.jsx)("button",{type:"submit",disabled:k,className:"w-full py-3 px-4 bg-gradient-to-r from-orange-500 to-yellow-500 text-white font-semibold rounded-xl hover:from-orange-600 hover:to-yellow-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:k?(0,b.jsx)(U,{}):"Sign In with Email"})]}),"apple"===a&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 text-center",children:"Sign in with the same Apple ID you use in the Elevatia app."}),(0,b.jsx)("button",{type:"button",onClick:Q,disabled:k,className:"w-full py-3 px-4 bg-black text-white font-semibold rounded-xl hover:bg-gray-800 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3",children:k?(0,b.jsx)(U,{}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:(0,b.jsx)("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})}),"Sign in with Apple"]})})]}),"phone"===a&&(0,b.jsx)("div",{className:"space-y-4",children:C?(0,b.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,b.jsxs)("p",{className:"text-sm text-gray-600 text-center",children:["Enter the 6-digit code sent to ",y]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"code",className:"block text-sm font-medium text-gray-700 mb-2",children:"Verification Code"}),(0,b.jsx)("input",{id:"code",type:"text",value:A,onChange:a=>B(a.target.value.replace(/\D/g,"").slice(0,6)),required:!0,maxLength:6,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all bg-white/80 text-center text-2xl tracking-widest font-mono",placeholder:"000000"})]}),(0,b.jsx)("button",{type:"submit",disabled:k||6!==A.length,className:"w-full py-3 px-4 bg-gradient-to-r from-orange-500 to-yellow-500 text-white font-semibold rounded-xl hover:from-orange-600 hover:to-yellow-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:k?(0,b.jsx)(U,{}):"Verify & Sign In"}),(0,b.jsx)("button",{type:"button",onClick:()=>{D(!1),B(""),F(null),G.current&&(G.current.clear(),G.current=null)},className:"w-full py-2 text-sm text-gray-600 hover:text-gray-900 transition-colors",children:"Use a different phone number"})]}):(0,b.jsxs)("form",{onSubmit:R,className:"space-y-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 text-center",children:"Enter the phone number linked to your Elevatia account."}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),(0,b.jsx)("input",{id:"phone",type:"tel",value:y,onChange:a=>z(a.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all bg-white/80",placeholder:"+1 (555) 123-4567"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Include country code (e.g., +1 for US)"})]}),(0,b.jsx)("button",{type:"submit",disabled:k,className:"w-full py-3 px-4 bg-gradient-to-r from-orange-500 to-yellow-500 text-white font-semibold rounded-xl hover:from-orange-600 hover:to-yellow-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:k?(0,b.jsx)(U,{}):"Send Verification Code"})]})}),(0,b.jsx)("div",{ref:H,id:"recaptcha-container"})]})}function k(){let{user:a,organization:h,loading:i,isSuperAdmin:k}=(0,g.useAuth)(),l=(0,d.useRouter)();return((0,c.useEffect)(()=>{!i&&a&&(k?l.push("/admin/partners"):h&&l.push(`/partners/dashboard/${h.slug}`))},[a,h,i,k,l]),i)?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#FDFAF6]",children:(0,b.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-orange-500 border-t-transparent rounded-full"})}):(0,b.jsxs)("div",{className:"min-h-screen bg-[#FDFAF6] flex flex-col",children:[(0,b.jsx)("nav",{className:"bg-white/80 backdrop-blur-md border-b border-gray-100",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,b.jsxs)(e.default,{href:"/",className:"flex items-center space-x-2",children:[(0,b.jsx)(f.default,{src:"/elevatia-logo.png",alt:"Elevatia Logo",width:32,height:32,className:"h-8 w-auto"}),(0,b.jsx)("span",{className:"text-xl font-semibold gradient-text",children:"Elevatia"})]}),(0,b.jsx)(e.default,{href:"/partners",className:"text-gray-600 hover:text-gray-900 text-sm font-medium transition-colors",children:"← Back to Partners"})]})})}),(0,b.jsx)("div",{className:"flex-1 flex items-center justify-center px-4 py-12",children:(0,b.jsx)("div",{className:"w-full max-w-md",children:(0,b.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-100 p-8",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-orange-100 to-yellow-100 rounded-2xl mb-4",children:(0,b.jsx)("svg",{className:"w-8 h-8 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Partner Dashboard"}),(0,b.jsx)("p",{className:"text-gray-600 mt-2",children:"Sign in to manage your Elevatia partnership"})]}),(0,b.jsx)(j,{}),(0,b.jsx)("div",{className:"mt-6 text-center",children:(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:["Not a partner yet?"," ",(0,b.jsx)(e.default,{href:"/partners",className:"text-orange-600 hover:text-orange-700 font-medium",children:"Learn more"})]})})]})})})]})}function l(){return(0,b.jsx)(g.AuthProvider,{children:(0,b.jsx)(k,{})})}a.s(["default",()=>l,"dynamic",0,"force-dynamic"],13805)}];

//# sourceMappingURL=src_app_partners_login_page_tsx_09ed78c4._.js.map