module.exports=[97546,a=>{"use strict";var b=a.i(87924),c=a.i(60721),d=a.i(72131);let e={orange:"from-orange-100 to-yellow-100 text-orange-600",green:"from-green-100 to-emerald-100 text-green-600",blue:"from-blue-100 to-cyan-100 text-blue-600",purple:"from-purple-100 to-pink-100 text-purple-600"};function f({title:a,value:c,subtitle:d,icon:f,trend:g,color:h="orange"}){return(0,b.jsx)("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl p-6 border border-gray-100 shadow-sm hover:shadow-md transition-shadow",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-500 mb-1",children:a}),(0,b.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:c}),d&&(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:d}),g&&(0,b.jsxs)("div",{className:`flex items-center gap-1 mt-2 text-sm ${g.isPositive?"text-green-600":"text-red-600"}`,children:[(0,b.jsx)("svg",{className:`w-4 h-4 ${!g.isPositive&&"rotate-180"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})}),(0,b.jsxs)("span",{children:[Math.abs(g.value),"%"]})]})]}),(0,b.jsx)("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${e[h]} flex items-center justify-center`,children:f})]})})}function g(){let{user:a,organization:e}=(0,c.useAuth)(),[g,h]=(0,d.useState)(null),[i,j]=(0,d.useState)(!0);if((0,d.useEffect)(()=>{!async function(){if(a&&e)try{let b=await a.getIdToken(),c=await fetch(`/api/partners/stats?organizationId=${e.id}`,{headers:{Authorization:`Bearer ${b}`}});if(c.ok){let a=await c.json();h(a)}}catch(a){console.error("Error fetching stats:",a)}finally{j(!1)}}()},[a,e]),i)return(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-orange-500 border-t-transparent rounded-full"})});if(!g)return(0,b.jsx)("div",{className:"text-center py-12 text-gray-500",children:"Unable to load statistics"});let k=Math.max(...g.chartData?.map(a=>a.redemptions)||[1],1);return(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,b.jsx)(f,{title:"Active Users",value:g.activeUsers,subtitle:"Currently using access",color:"green",icon:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,b.jsx)(f,{title:"Total Redemptions",value:g.totalRedemptions,subtitle:"All time",color:"blue",icon:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,b.jsx)(f,{title:"Active Codes",value:g.activeCodesCount,subtitle:"Ready to use",color:"orange",icon:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})}),(0,b.jsx)(f,{title:"Expired Users",value:g.expiredUsers,subtitle:"Access ended",color:"purple",icon:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),(0,b.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl p-6 border border-gray-100",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Redemptions (Last 30 Days)"}),(0,b.jsx)("div",{className:"h-48 flex items-end gap-1",children:g.chartData?.map((a,c)=>(0,b.jsxs)("div",{className:"flex-1 flex flex-col items-center gap-1",children:[(0,b.jsx)("div",{className:"w-full bg-gradient-to-t from-orange-500 to-yellow-400 rounded-t transition-all hover:from-orange-600 hover:to-yellow-500",style:{height:`${Math.max(a.redemptions/k*100,4)}%`,minHeight:a.redemptions>0?"8px":"2px",opacity:a.redemptions>0?1:.3},title:`${a.date}: ${a.redemptions} redemptions`}),c%5==0&&(0,b.jsx)("span",{className:"text-xs text-gray-400 -rotate-45 origin-left whitespace-nowrap",children:new Date(a.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]},a.date))})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-yellow-50 rounded-2xl p-6 border border-orange-100",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,b.jsx)("button",{onClick:()=>document.querySelector('[data-tab="codes"]')?.dispatchEvent(new Event("click")),className:"px-4 py-2 bg-white rounded-xl text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors border border-gray-200",children:"Generate New Code"}),(0,b.jsx)("button",{onClick:()=>document.querySelector('[data-tab="paths"]')?.dispatchEvent(new Event("click")),className:"px-4 py-2 bg-white rounded-xl text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors border border-gray-200",children:"Create Path"}),(0,b.jsx)("button",{onClick:()=>document.querySelector('[data-tab="settings"]')?.dispatchEvent(new Event("click")),className:"px-4 py-2 bg-white rounded-xl text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors border border-gray-200",children:"Update Profile"})]})]})]})}function h(){let{user:a,organization:e}=(0,c.useAuth)(),[f,g]=(0,d.useState)([]),[h,i]=(0,d.useState)(!0),[j,k]=(0,d.useState)(!1),[l,m]=(0,d.useState)(!1),[n,o]=(0,d.useState)(null),p=async()=>{if(a&&e)try{let b=await a.getIdToken(),c=await fetch(`/api/partners/codes?organizationId=${e.id}`,{headers:{Authorization:`Bearer ${b}`}});if(c.ok){let a=await c.json();g(a.codes)}}catch(a){console.error("Error fetching codes:",a)}finally{i(!1)}};(0,d.useEffect)(()=>{p()},[a,e]);let q=async b=>{if(b.preventDefault(),!a||!e)return;m(!0);let c=new FormData(b.currentTarget),d={organizationId:e.id,type:c.get("type"),maxRedemptions:"multi"===c.get("type")?parseInt(c.get("maxRedemptions")):void 0,expiresAt:c.get("expiresAt"),durationDays:parseInt(c.get("durationDays"))||e.defaultCodeDurationDays,label:c.get("label")||void 0,notes:c.get("notes")||void 0,prefix:c.get("prefix")||void 0};try{let b=await a.getIdToken();(await fetch("/api/partners/codes",{method:"POST",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"},body:JSON.stringify(d)})).ok&&(k(!1),p())}catch(a){console.error("Error creating code:",a)}finally{m(!1)}},r=async b=>{if(a&&e)try{let c=await a.getIdToken();await fetch("/api/partners/codes",{method:"PATCH",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"},body:JSON.stringify({codeId:b.id,organizationId:e.id,isActive:!b.isActive})}),p()}catch(a){console.error("Error toggling code:",a)}};return h?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-orange-500 border-t-transparent rounded-full"})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Partner Codes"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Generate and manage access codes for your users"})]}),(0,b.jsxs)("button",{onClick:()=>k(!0),className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-yellow-500 text-white font-medium rounded-xl hover:from-orange-600 hover:to-yellow-600 transition-all flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Generate Code"]})]}),(0,b.jsx)("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl border border-gray-100 overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50/50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Code"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Label"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Type"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Redemptions"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Expires"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Status"}),(0,b.jsx)("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-100",children:0===f.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:"No codes yet. Generate your first code to get started."})}):f.map(a=>{var c,d;return(0,b.jsxs)("tr",{className:"hover:bg-gray-50/50 transition-colors",children:[(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("code",{className:"font-mono text-sm font-semibold text-gray-900 bg-gray-100 px-2 py-1 rounded",children:a.code}),(0,b.jsx)("button",{onClick:()=>{var b;return b=a.code,void(navigator.clipboard.writeText(b),o(b),setTimeout(()=>o(null),2e3))},className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",title:"Copy code",children:n===a.code?(0,b.jsx)("svg",{className:"w-4 h-4 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:a.label||(0,b.jsx)("span",{className:"text-gray-400",children:"—"})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${"multi"===a.type?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:"multi"===a.type?"Multi-use":"Single-use"})}),(0,b.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-600",children:[a.currentRedemptions,"multi"===a.type&&a.maxRedemptions&&(0,b.jsxs)("span",{className:"text-gray-400",children:[" / ",a.maxRedemptions]})]}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date("object"==typeof(c=a.expiresAt)&&c.seconds?1e3*c.seconds:c).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),(0,b.jsx)("td",{className:"px-6 py-4",children:a.isActive?new Date("object"==typeof(d=a.expiresAt)&&d.seconds?1e3*d.seconds:d)<new Date?(0,b.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-700",children:"Expired"}):"single"===a.type&&a.currentRedemptions>=1?(0,b.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:"Used"}):"multi"===a.type&&a.maxRedemptions&&a.currentRedemptions>=a.maxRedemptions?(0,b.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700",children:"Maxed"}):(0,b.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-700",children:"Active"}):(0,b.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:"Disabled"})}),(0,b.jsx)("td",{className:"px-6 py-4 text-right",children:(0,b.jsx)("button",{onClick:()=>r(a),className:`text-sm font-medium transition-colors ${a.isActive?"text-red-600 hover:text-red-700":"text-green-600 hover:text-green-700"}`,children:a.isActive?"Disable":"Enable"})})]},a.id)})})]})})}),j&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Generate New Code"}),(0,b.jsx)("button",{onClick:()=>k(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsxs)("form",{onSubmit:q,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code Type"}),(0,b.jsxs)("select",{name:"type",className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent",defaultValue:"multi",children:[(0,b.jsx)("option",{value:"single",children:"Single-use (1 redemption)"}),(0,b.jsx)("option",{value:"multi",children:"Multi-use (multiple redemptions)"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Redemptions (for multi-use)"}),(0,b.jsx)("input",{type:"number",name:"maxRedemptions",min:"1",defaultValue:"100",className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code Expiration"}),(0,b.jsx)("input",{type:"date",name:"expiresAt",required:!0,min:new Date().toISOString().split("T")[0],defaultValue:new Date(Date.now()+7776e6).toISOString().split("T")[0],className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Access Duration (days after redemption)"}),(0,b.jsx)("input",{type:"number",name:"durationDays",min:"1",defaultValue:e?.defaultCodeDurationDays||30,className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Label (optional)"}),(0,b.jsx)("input",{type:"text",name:"label",placeholder:"e.g., Summer 2025 Promo",className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code Prefix (optional)"}),(0,b.jsx)("input",{type:"text",name:"prefix",placeholder:e?.slug.toUpperCase().slice(0,4)||"CODE",maxLength:6,className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent uppercase"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (optional)"}),(0,b.jsx)("textarea",{name:"notes",rows:2,placeholder:"Internal notes about this code...",className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none"})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)("button",{type:"button",onClick:()=>k(!1),className:"flex-1 py-2 px-4 border border-gray-200 text-gray-700 font-medium rounded-xl hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:l,className:"flex-1 py-2 px-4 bg-gradient-to-r from-orange-500 to-yellow-500 text-white font-medium rounded-xl hover:from-orange-600 hover:to-yellow-600 transition-all disabled:opacity-50",children:l?"Creating...":"Generate Code"})]})]})]})})]})}function i(){let{user:a,organization:e}=(0,c.useAuth)(),[f,g]=(0,d.useState)([]),[h,i]=(0,d.useState)(!0),[j,k]=(0,d.useState)({total:0,activeCount:0});(0,d.useEffect)(()=>{!async function(){if(a&&e)try{let b=await a.getIdToken(),c=await fetch(`/api/partners/users?organizationId=${e.id}`,{headers:{Authorization:`Bearer ${b}`}});if(c.ok){let a=await c.json();g(a.users),k({total:a.total,activeCount:a.activeCount})}}catch(a){console.error("Error fetching users:",a)}finally{i(!1)}}()},[a,e]);let l=a=>new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return h?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-orange-500 border-t-transparent rounded-full"})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Affiliated Users"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Users who have redeemed your partner codes (anonymized)"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-4 border border-gray-100",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Total Users"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:j.total})]}),(0,b.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-4 border border-gray-100",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Active Users"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-green-600",children:j.activeCount})]})]}),(0,b.jsx)("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl border border-gray-100 overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50/50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"User ID"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Code Used"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Redeemed"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Access Expires"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-100",children:0===f.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-500",children:"No users have redeemed codes yet."})}):f.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50/50 transition-colors",children:[(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("code",{className:"font-mono text-sm text-gray-600 bg-gray-100 px-2 py-1 rounded",children:a.id})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("code",{className:"font-mono text-sm text-gray-900 bg-gray-100 px-2 py-1 rounded",children:a.codeUsed})}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:l(a.redeemedAt)}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:l(a.accessExpiresAt)}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:a.isActive?"Active":"Expired"})})]},a.id))})]})})}),(0,b.jsx)("div",{className:"bg-blue-50 border border-blue-100 rounded-xl p-4 text-sm text-blue-700",children:(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:"Privacy Protection"}),(0,b.jsx)("p",{className:"mt-1 text-blue-600",children:"User data is anonymized. You can see redemption patterns but not personal information like names or emails."})]})]})})]})}let j=[{value:"figure.walk",label:"Walking"},{value:"heart.fill",label:"Heart"},{value:"brain.head.profile",label:"Brain"},{value:"leaf.fill",label:"Leaf"},{value:"drop.fill",label:"Water"},{value:"moon.fill",label:"Moon"},{value:"sun.max.fill",label:"Sun"},{value:"bolt.fill",label:"Energy"},{value:"flame.fill",label:"Flame"},{value:"star.fill",label:"Star"}],k=[{value:"#FF6B6B",label:"Red"},{value:"#4ECDC4",label:"Teal"},{value:"#45B7D1",label:"Blue"},{value:"#96CEB4",label:"Green"},{value:"#FFEAA7",label:"Yellow"},{value:"#DDA0DD",label:"Purple"},{value:"#FF8C42",label:"Orange"},{value:"#A8E6CF",label:"Mint"}],l=["Fitness","Nutrition","Mindfulness","Sleep","Recovery","Performance","Wellness","Custom"],m=[{value:"fitness",label:"Fitness"},{value:"nutrition",label:"Nutrition"},{value:"mental",label:"Mental Wellness"},{value:"sleep",label:"Sleep"},{value:"recovery",label:"Recovery"},{value:"other",label:"Other"}],n={pending:{bg:"bg-yellow-100",text:"text-yellow-700",label:"Pending"},in_review:{bg:"bg-blue-100",text:"text-blue-700",label:"In Review"},approved:{bg:"bg-green-100",text:"text-green-700",label:"Approved"},rejected:{bg:"bg-red-100",text:"text-red-700",label:"Rejected"},live:{bg:"bg-green-100",text:"text-green-700",label:"Live",icon:"✓"}};function o(){let{user:a,organization:e}=(0,c.useAuth)(),[f,g]=(0,d.useState)([]),[h,i]=(0,d.useState)([]),[o,p]=(0,d.useState)(!0),[q,r]=(0,d.useState)(!1),[s,t]=(0,d.useState)(!1),[u,v]=(0,d.useState)(!1),[w,x]=(0,d.useState)(!1),[y,z]=(0,d.useState)(""),[A,B]=(0,d.useState)({pathName:"",description:"",targetAudience:"",goals:[""],preferredCategory:"fitness",additionalNotes:""}),C=async()=>{if(a&&e)try{let b=await a.getIdToken(),c=await fetch(`/api/partners/paths?organizationId=${e.id}`,{headers:{Authorization:`Bearer ${b}`}});if(c.ok){let a=await c.json();g(a.paths)}}catch(a){console.error("Error fetching paths:",a)}},D=async()=>{if(a&&e)try{let b=await a.getIdToken(),c=await fetch("/api/partners/path-requests",{headers:{Authorization:`Bearer ${b}`}});if(c.ok){let a=await c.json();i(a.requests)}}catch(a){console.error("Error fetching path requests:",a)}};(0,d.useEffect)(()=>{(async()=>{p(!0),await Promise.all([C(),D()]),p(!1)})()},[a,e]);let E=async b=>{if(b.preventDefault(),!a||!e)return;v(!0);let c=new FormData(b.currentTarget),d={organizationId:e.id,pathId:c.get("pathId"),title:c.get("title"),description:c.get("description"),icon:c.get("icon"),color:c.get("color"),category:c.get("category")};try{let b=await a.getIdToken();(await fetch("/api/partners/paths",{method:"POST",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"},body:JSON.stringify(d)})).ok&&(r(!1),C())}catch(a){console.error("Error creating path:",a)}finally{v(!1)}},F=async b=>{if(b.preventDefault(),!a||!e)return;let c=A.goals.filter(a=>""!==a.trim());if(0===c.length)return void alert("Please add at least one goal");x(!0);try{let b=await a.getIdToken(),d=await fetch("/api/partners/path-requests",{method:"POST",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"},body:JSON.stringify({...A,goals:c})});if(d.ok){let a=await d.json();t(!1),z(a.message),B({pathName:"",description:"",targetAudience:"",goals:[""],preferredCategory:"fitness",additionalNotes:""}),D(),setTimeout(()=>z(""),5e3)}}catch(a){console.error("Error submitting request:",a)}finally{x(!1)}},G=async b=>{if(a&&e)try{let c=await a.getIdToken();await fetch("/api/partners/paths",{method:"PATCH",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"},body:JSON.stringify({pathId:b.id,organizationId:e.id,isActive:!b.isActive})}),C()}catch(a){console.error("Error toggling path:",a)}},H=async b=>{if(a&&e&&confirm("Are you sure you want to delete this path?"))try{let c=await a.getIdToken();await fetch(`/api/partners/paths?pathId=${b.id}&organizationId=${e.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${c}`}}),C()}catch(a){console.error("Error deleting path:",a)}};return o?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-orange-500 border-t-transparent rounded-full"})}):(0,b.jsxs)("div",{className:"space-y-8",children:[y&&(0,b.jsxs)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-xl flex items-center gap-3",children:[(0,b.jsx)("svg",{className:"w-5 h-5 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),y]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Partner Paths"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Create exclusive wellness paths for your users"})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsxs)("button",{onClick:()=>t(!0),className:"px-4 py-2 border border-orange-500 text-orange-600 font-medium rounded-xl hover:bg-orange-50 transition-all flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),"Request Custom Path"]}),(0,b.jsxs)("button",{onClick:()=>r(!0),className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-yellow-500 text-white font-medium rounded-xl hover:from-orange-600 hover:to-yellow-600 transition-all flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Path"]})]})]}),h.length>0&&(0,b.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl border border-gray-100 p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Custom Path Requests"}),(0,b.jsx)("div",{className:"space-y-3",children:h.map(a=>{let c=n[a.status]||n.pending;return(0,b.jsx)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-1",children:[(0,b.jsx)("h4",{className:"font-medium text-gray-900",children:a.pathName}),(0,b.jsxs)("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${c.bg} ${c.text}`,children:[c.icon&&(0,b.jsx)("span",{className:"mr-1",children:c.icon}),c.label]})]}),(0,b.jsx)("p",{className:"text-sm text-gray-500 line-clamp-1",children:a.description}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-400",children:[(0,b.jsxs)("span",{children:["Category: ",m.find(b=>b.value===a.preferredCategory)?.label]}),(0,b.jsxs)("span",{children:["Goals: ",a.goals.length]}),a.submittedAt&&(0,b.jsxs)("span",{children:["Submitted: ",new Date(1e3*a.submittedAt.seconds).toLocaleDateString()]})]}),"rejected"===a.status&&a.rejectionReason&&(0,b.jsxs)("p",{className:"text-sm text-red-600 mt-2",children:["Reason: ",a.rejectionReason]}),a.reviewNotes&&(0,b.jsxs)("p",{className:"text-sm text-blue-600 mt-2",children:["Note: ",a.reviewNotes]})]})},a.id)})})]}),0===f.length&&0===h.length?(0,b.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl border border-gray-100 p-12 text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-2xl flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})})}),(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No paths yet"}),(0,b.jsx)("p",{className:"text-gray-500 mb-4",children:"Create your first exclusive wellness path or request a custom one."}),(0,b.jsx)("div",{className:"flex justify-center gap-3",children:(0,b.jsx)("button",{onClick:()=>t(!0),className:"text-orange-600 font-medium hover:text-orange-700",children:"Request a custom path →"})})]}):f.length>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Active Paths"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(a=>(0,b.jsxs)("div",{className:`bg-white/90 backdrop-blur-sm rounded-2xl border border-gray-100 p-6 transition-all hover:shadow-md ${!a.isActive&&"opacity-60"}`,children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-white text-xl",style:{backgroundColor:a.color},children:j.find(b=>b.value===a.icon)?.label?.charAt(0)||"★"}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:a.isActive?"Active":"Inactive"})})]}),(0,b.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:a.title}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-3 line-clamp-2",children:a.description}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)("span",{className:"px-2 py-1 bg-gray-100 rounded-lg text-xs text-gray-600",children:a.category}),(0,b.jsx)("span",{className:"text-xs text-gray-400",children:a.pathId})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 pt-4 border-t border-gray-100",children:[(0,b.jsx)("button",{onClick:()=>G(a),className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-colors ${a.isActive?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:a.isActive?"Deactivate":"Activate"}),(0,b.jsx)("button",{onClick:()=>H(a),className:"py-2 px-3 rounded-lg text-sm font-medium text-red-600 hover:bg-red-50 transition-colors",children:"Delete"})]})]},a.id))})]}),q&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-6 max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Create New Path"}),(0,b.jsx)("button",{onClick:()=>r(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsxs)("form",{onSubmit:E,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Path ID"}),(0,b.jsx)("input",{type:"text",name:"pathId",required:!0,placeholder:"e.g., recovery, wellness101",pattern:"[a-z0-9_]+",className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Lowercase letters, numbers, and underscores only"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),(0,b.jsx)("input",{type:"text",name:"title",required:!0,placeholder:"e.g., Post-Workout Recovery",className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,b.jsx)("textarea",{name:"description",required:!0,rows:3,placeholder:"Describe what this path helps users achieve...",className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,b.jsx)("select",{name:"category",required:!0,className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:l.map(a=>(0,b.jsx)("option",{value:a,children:a},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Icon"}),(0,b.jsx)("select",{name:"icon",required:!0,className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:j.map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),(0,b.jsx)("div",{className:"grid grid-cols-4 gap-2",children:k.map(a=>(0,b.jsxs)("label",{className:"cursor-pointer",children:[(0,b.jsx)("input",{type:"radio",name:"color",value:a.value,defaultChecked:a.value===k[0].value,className:"sr-only peer"}),(0,b.jsx)("div",{className:"w-full h-10 rounded-lg border-2 border-transparent peer-checked:border-gray-900 transition-all",style:{backgroundColor:a.value},title:a.label})]},a.value))})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)("button",{type:"button",onClick:()=>r(!1),className:"flex-1 py-2 px-4 border border-gray-200 text-gray-700 font-medium rounded-xl hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:u,className:"flex-1 py-2 px-4 bg-gradient-to-r from-orange-500 to-yellow-500 text-white font-medium rounded-xl hover:from-orange-600 hover:to-yellow-600 transition-all disabled:opacity-50",children:u?"Creating...":"Create Path"})]})]})]})}),s&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Request Custom Path"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"We'll build a custom wellness path tailored to your needs"})]}),(0,b.jsx)("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsxs)("form",{onSubmit:F,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Path Name"}),(0,b.jsx)("input",{type:"text",required:!0,value:A.pathName,onChange:a=>B(b=>({...b,pathName:a.target.value})),placeholder:"e.g., Corporate Stress Relief Program",className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description - What should this path help users achieve?"}),(0,b.jsx)("textarea",{required:!0,rows:3,value:A.description,onChange:a=>B(b=>({...b,description:a.target.value})),placeholder:"Describe the purpose and outcomes you'd like this path to provide...",className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Target Audience - Who is this path for?"}),(0,b.jsx)("input",{type:"text",required:!0,value:A.targetAudience,onChange:a=>B(b=>({...b,targetAudience:a.target.value})),placeholder:"e.g., Remote employees dealing with work-from-home burnout",className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Goals - What outcomes should users expect?"}),(0,b.jsxs)("div",{className:"space-y-2",children:[A.goals.map((a,c)=>(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:"text",value:a,onChange:a=>{var b;return b=a.target.value,void B(a=>({...a,goals:a.goals.map((a,d)=>d===c?b:a)}))},placeholder:`Goal ${c+1}`,className:"flex-1 px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),A.goals.length>1&&(0,b.jsx)("button",{type:"button",onClick:()=>{B(a=>({...a,goals:a.goals.filter((a,b)=>b!==c)}))},className:"px-3 py-2 text-red-500 hover:bg-red-50 rounded-xl transition-colors",children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},c)),(0,b.jsxs)("button",{type:"button",onClick:()=>{B(a=>({...a,goals:[...a.goals,""]}))},className:"text-sm text-orange-600 font-medium hover:text-orange-700 flex items-center gap-1",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add another goal"]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,b.jsx)("select",{required:!0,value:A.preferredCategory,onChange:a=>B(b=>({...b,preferredCategory:a.target.value})),className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:m.map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Additional Notes ",(0,b.jsx)("span",{className:"text-gray-400",children:"(optional)"})]}),(0,b.jsx)("textarea",{rows:2,value:A.additionalNotes,onChange:a=>B(b=>({...b,additionalNotes:a.target.value})),placeholder:"Any other details that would help us build the perfect path...",className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none"})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)("button",{type:"button",onClick:()=>t(!1),className:"flex-1 py-2 px-4 border border-gray-200 text-gray-700 font-medium rounded-xl hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:w,className:"flex-1 py-2 px-4 bg-gradient-to-r from-orange-500 to-yellow-500 text-white font-medium rounded-xl hover:from-orange-600 hover:to-yellow-600 transition-all disabled:opacity-50",children:w?"Submitting...":"Submit Request"})]})]})]})})]})}function p(){let{user:a,organization:e,partnerAdmin:f}=(0,c.useAuth)(),[g,h]=(0,d.useState)([]),[i,j]=(0,d.useState)(!0),[k,l]=(0,d.useState)(!1),[m,n]=(0,d.useState)(!1),[o,p]=(0,d.useState)(!1),[q,r]=(0,d.useState)(null),[s,t]=(0,d.useState)(""),[u,v]=(0,d.useState)(""),[w,x]=(0,d.useState)("#FF6B00");(0,d.useEffect)(()=>{e&&(t(e.description||""),v(e.website||""),x(e.primaryColor||"#FF6B00"))},[e]);let y=async()=>{if(a&&e)try{let b=await a.getIdToken(),c=await fetch(`/api/partners/organizations?organizationId=${e.id}`,{headers:{Authorization:`Bearer ${b}`}});if(c.ok){let a=await c.json();h(a.admins||[])}}catch(a){console.error("Error fetching admins:",a)}finally{j(!1)}};(0,d.useEffect)(()=>{y()},[a,e]);let z=async b=>{if(b.preventDefault(),a&&e){l(!0),r(null);try{let b=await a.getIdToken(),c=await fetch("/api/partners/organizations",{method:"PATCH",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"},body:JSON.stringify({organizationId:e.id,description:s,website:u,primaryColor:w})});if(c.ok)r({type:"success",text:"Profile updated successfully"});else{let a=await c.json();r({type:"error",text:a.error||"Failed to update profile"})}}catch(a){r({type:"error",text:"Failed to update profile"})}finally{l(!1)}}},A=async b=>{if(b.preventDefault(),!a||!e)return;p(!0);let c=new FormData(b.currentTarget),d={organizationId:e.id,action:"addAdmin",email:c.get("email"),role:c.get("role"),displayName:c.get("displayName")||void 0};try{let b=await a.getIdToken(),c=await fetch("/api/partners/organizations",{method:"PUT",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"},body:JSON.stringify(d)});if(c.ok)n(!1),y(),r({type:"success",text:"Team member added successfully"});else{let a=await c.json();r({type:"error",text:a.error||"Failed to add team member"})}}catch(a){r({type:"error",text:"Failed to add team member"})}finally{p(!1)}},B=async b=>{if(a&&e&&confirm("Are you sure you want to remove this team member?"))try{let c=await a.getIdToken(),d=await fetch("/api/partners/organizations",{method:"PUT",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"},body:JSON.stringify({organizationId:e.id,action:"removeAdmin",adminId:b})});if(d.ok)y(),r({type:"success",text:"Team member removed"});else{let a=await d.json();r({type:"error",text:a.error||"Failed to remove team member"})}}catch(a){r({type:"error",text:"Failed to remove team member"})}},C=f?.role==="owner";return i?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-orange-500 border-t-transparent rounded-full"})}):(0,b.jsxs)("div",{className:"space-y-8",children:[q&&(0,b.jsx)("div",{className:`px-4 py-3 rounded-xl text-sm ${"success"===q.type?"bg-green-50 border border-green-200 text-green-700":"bg-red-50 border border-red-200 text-red-700"}`,children:q.text}),(0,b.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl border border-gray-100 p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Organization Profile"}),(0,b.jsxs)("form",{onSubmit:z,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Organization Name"}),(0,b.jsx)("input",{type:"text",value:e?.name||"",disabled:!0,className:"w-full px-4 py-2 border border-gray-200 rounded-xl bg-gray-50 text-gray-500"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Contact support to change"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug"}),(0,b.jsx)("input",{type:"text",value:e?.slug||"",disabled:!0,className:"w-full px-4 py-2 border border-gray-200 rounded-xl bg-gray-50 text-gray-500"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,b.jsx)("textarea",{value:s,onChange:a=>t(a.target.value),rows:3,placeholder:"Tell users about your organization...",className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),(0,b.jsx)("input",{type:"url",value:u,onChange:a=>v(a.target.value),placeholder:"https://yourcompany.com",className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Brand Color"}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("input",{type:"color",value:w,onChange:a=>x(a.target.value),className:"w-12 h-12 rounded-lg border border-gray-200 cursor-pointer"}),(0,b.jsx)("input",{type:"text",value:w,onChange:a=>x(a.target.value),pattern:"^#[0-9A-Fa-f]{6}$",className:"px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent w-32 font-mono"})]})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsx)("button",{type:"submit",disabled:k,className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-yellow-500 text-white font-medium rounded-xl hover:from-orange-600 hover:to-yellow-600 transition-all disabled:opacity-50",children:k?"Saving...":"Save Changes"})})]})]}),(0,b.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl border border-gray-100 p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Partnership Details"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Tier"}),(0,b.jsx)("p",{className:"font-semibold text-gray-900 capitalize",children:e?.tier})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Status"}),(0,b.jsx)("p",{className:`font-semibold capitalize ${e?.status==="active"?"text-green-600":"text-gray-600"}`,children:e?.status})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Max Active Users"}),(0,b.jsx)("p",{className:"font-semibold text-gray-900",children:e?.maxActiveUsers})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Default Code Duration"}),(0,b.jsxs)("p",{className:"font-semibold text-gray-900",children:[e?.defaultCodeDurationDays," days"]})]})]})]}),(0,b.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl border border-gray-100 p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Team Members"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Manage who has access to this dashboard"})]}),C&&(0,b.jsxs)("button",{onClick:()=>n(!0),className:"px-4 py-2 bg-gray-900 text-white font-medium rounded-xl hover:bg-gray-800 transition-colors flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Member"]})]}),(0,b.jsx)("div",{className:"space-y-3",children:g.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-200 to-yellow-200 rounded-full flex items-center justify-center text-orange-700 font-semibold",children:(a.displayName||a.email).charAt(0).toUpperCase()}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-900",children:a.displayName||a.email}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:a.email})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${"owner"===a.role?"bg-purple-100 text-purple-700":"admin"===a.role?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"}`,children:a.role}),C&&a.id!==f?.id&&(0,b.jsx)("button",{onClick:()=>B(a.id),className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"Remove"})]})]},a.id))})]}),m&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Add Team Member"}),(0,b.jsx)("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsxs)("form",{onSubmit:A,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,b.jsx)("input",{type:"email",name:"email",required:!0,placeholder:"team@company.com",className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Must have an existing Elevatia account"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Name (optional)"}),(0,b.jsx)("input",{type:"text",name:"displayName",placeholder:"John Smith",className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),(0,b.jsxs)("select",{name:"role",className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent",defaultValue:"admin",children:[(0,b.jsx)("option",{value:"owner",children:"Owner (full access + team management)"}),(0,b.jsx)("option",{value:"admin",children:"Admin (can manage codes & paths)"}),(0,b.jsx)("option",{value:"viewer",children:"Viewer (read-only access)"})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)("button",{type:"button",onClick:()=>n(!1),className:"flex-1 py-2 px-4 border border-gray-200 text-gray-700 font-medium rounded-xl hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:o,className:"flex-1 py-2 px-4 bg-gradient-to-r from-orange-500 to-yellow-500 text-white font-medium rounded-xl hover:from-orange-600 hover:to-yellow-600 transition-all disabled:opacity-50",children:o?"Adding...":"Add Member"})]})]})]})})]})}let q=[{id:"overview",label:"Overview",icon:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})},{id:"codes",label:"Codes",icon:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})},{id:"users",label:"Users",icon:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})},{id:"paths",label:"Paths",icon:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})})},{id:"settings",label:"Settings",icon:(0,b.jsxs)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}];function r(){let[a,c]=(0,d.useState)("overview");return(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"border-b border-gray-200 mb-8",children:(0,b.jsx)("nav",{className:"flex gap-1 -mb-px overflow-x-auto",children:q.map(d=>(0,b.jsxs)("button",{"data-tab":d.id,onClick:()=>c(d.id),className:`flex items-center gap-2 px-4 py-3 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${a===d.id?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[d.icon,d.label]},d.id))})}),(0,b.jsx)("div",{children:(()=>{switch(a){case"overview":default:return(0,b.jsx)(g,{});case"codes":return(0,b.jsx)(h,{});case"users":return(0,b.jsx)(i,{});case"paths":return(0,b.jsx)(o,{});case"settings":return(0,b.jsx)(p,{})}})()})]})}function s(){let{organization:a}=(0,c.useAuth)();return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Welcome back",a?.contactName?`, ${a.contactName.split(" ")[0]}`:""]}),(0,b.jsx)("p",{className:"text-gray-600",children:"Manage your Elevatia partnership and track engagement"})]}),(0,b.jsx)(r,{})]})}a.s(["default",()=>s],97546)}];

//# sourceMappingURL=src_app_partners_dashboard_%5Bslug%5D_page_tsx_8ca16005._.js.map