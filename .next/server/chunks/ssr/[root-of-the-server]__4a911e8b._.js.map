{"version":3,"sources":["../../../../src/app/partners/dashboard/%5Bslug%5D/layout.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useRouter, useParams } from 'next/navigation';\nimport Link from 'next/link';\nimport Image from 'next/image';\nimport { AuthProvider, useAuth } from '@/lib/auth-context';\n\nfunction DashboardLayoutContent({ children }: { children: React.ReactNode }) {\n  const { user, organization, partnerAdmin, loading, signOut, isSuperAdmin } = useAuth();\n  const router = useRouter();\n  const params = useParams();\n  const slug = params.slug as string;\n  const [showUserMenu, setShowUserMenu] = useState(false);\n\n  useEffect(() => {\n    if (!loading) {\n      if (!user) {\n        router.push('/partners/login');\n        return;\n      }\n      \n      // Verify user has access to this org\n      if (organization && organization.slug !== slug && !isSuperAdmin) {\n        router.push(`/partners/dashboard/${organization.slug}`);\n      }\n    }\n  }, [user, organization, loading, slug, router, isSuperAdmin]);\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-[#FDFAF6]\">\n        <div className=\"animate-spin h-8 w-8 border-4 border-orange-500 border-t-transparent rounded-full\" />\n      </div>\n    );\n  }\n\n  if (!user || (!organization && !isSuperAdmin)) {\n    return null;\n  }\n\n  const handleSignOut = async () => {\n    await signOut();\n    router.push('/partners/login');\n  };\n\n  return (\n    <div className=\"min-h-screen bg-[#FDFAF6]\">\n      {/* Header */}\n      <header className=\"bg-white/80 backdrop-blur-md border-b border-gray-100 sticky top-0 z-40\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center h-16\">\n            <div className=\"flex items-center gap-6\">\n              <Link href=\"/\" className=\"flex items-center space-x-2\">\n                <Image \n                  src=\"/elevatia-logo.png\" \n                  alt=\"Elevatia Logo\" \n                  width={32}\n                  height={32}\n                  className=\"h-8 w-auto\"\n                />\n                <span className=\"text-xl font-semibold gradient-text\">Elevatia</span>\n              </Link>\n              \n              <div className=\"hidden sm:flex items-center gap-2 text-sm\">\n                <span className=\"text-gray-400\">/</span>\n                <span className=\"text-gray-600\">Partners</span>\n                <span className=\"text-gray-400\">/</span>\n                <span className=\"font-medium text-gray-900\">{organization?.name || 'Admin'}</span>\n              </div>\n            </div>\n            \n            <div className=\"flex items-center gap-4\">\n              {isSuperAdmin && (\n                <Link \n                  href=\"/admin/partners\"\n                  className=\"text-sm text-purple-600 hover:text-purple-700 font-medium\"\n                >\n                  Super Admin\n                </Link>\n              )}\n              \n              <div className=\"relative\">\n                <button\n                  onClick={() => setShowUserMenu(!showUserMenu)}\n                  className=\"flex items-center gap-2 p-2 rounded-xl hover:bg-gray-100 transition-colors\"\n                >\n                  <div className=\"w-8 h-8 bg-gradient-to-br from-orange-200 to-yellow-200 rounded-full flex items-center justify-center text-orange-700 font-semibold text-sm\">\n                    {(partnerAdmin?.displayName || partnerAdmin?.email || 'U').charAt(0).toUpperCase()}\n                  </div>\n                  <svg className=\"w-4 h-4 text-gray-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                  </svg>\n                </button>\n                \n                {showUserMenu && (\n                  <>\n                    <div \n                      className=\"fixed inset-0 z-10\" \n                      onClick={() => setShowUserMenu(false)}\n                    />\n                    <div className=\"absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-lg border border-gray-100 py-2 z-20\">\n                      <div className=\"px-4 py-2 border-b border-gray-100\">\n                        <p className=\"text-sm font-medium text-gray-900 truncate\">\n                          {partnerAdmin?.displayName || partnerAdmin?.email}\n                        </p>\n                        <p className=\"text-xs text-gray-500 capitalize\">{partnerAdmin?.role}</p>\n                      </div>\n                      <button\n                        onClick={handleSignOut}\n                        className=\"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors\"\n                      >\n                        Sign Out\n                      </button>\n                    </div>\n                  </>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Organization Status Banner */}\n      {organization?.status === 'suspended' && (\n        <div className=\"bg-red-500 text-white text-center py-2 text-sm\">\n          Your organization is suspended. Please contact support.\n        </div>\n      )}\n      {organization?.status === 'pending' && (\n        <div className=\"bg-yellow-500 text-white text-center py-2 text-sm\">\n          Your organization is pending approval.\n        </div>\n      )}\n\n      {/* Main Content */}\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {children}\n      </main>\n    </div>\n  );\n}\n\nexport default function DashboardLayout({ children }: { children: React.ReactNode }) {\n  return (\n    <AuthProvider>\n      <DashboardLayoutContent>{children}</DashboardLayoutContent>\n    </AuthProvider>\n  );\n}\n\n"],"names":[],"mappings":"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"}