(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,58957,e=>{"use strict";var r=e.i(43476),t=e.i(71645),s=e.i(18566),a=e.i(22016),l=e.i(57688),n=e.i(94690);function i(){let{user:e,loading:i,isSuperAdmin:o,signOut:d}=(0,n.useAuth)(),c=(0,s.useRouter)(),[m,x]=(0,t.useState)([]),[u,p]=(0,t.useState)(!0),[g,h]=(0,t.useState)(!1),[b,f]=(0,t.useState)(null),[y,j]=(0,t.useState)(!1),[v,N]=(0,t.useState)(null);(0,t.useEffect)(()=>{(i||e)&&(i||o)||c.push("/partners/login")},[e,i,o,c]);let w=async()=>{if(e)try{let r=await e.getIdToken(),t=await fetch("/api/partners/organizations?listAll=true",{headers:{Authorization:`Bearer ${r}`}});if(t.ok){let e=await t.json();x(e.organizations||[])}}catch(e){console.error("Error fetching organizations:",e)}finally{p(!1)}};(0,t.useEffect)(()=>{o&&w()},[e,o]);let k=async r=>{if(r.preventDefault(),!e)return;j(!0),N(null);let t=new FormData(r.currentTarget),s={name:t.get("name"),slug:t.get("slug"),primaryColor:t.get("primaryColor")||"#FF6B00",tier:t.get("tier"),maxActiveUsers:parseInt(t.get("maxActiveUsers")),defaultCodeDurationDays:parseInt(t.get("defaultCodeDurationDays")),contactEmail:t.get("contactEmail"),contactName:t.get("contactName"),description:t.get("description")||void 0,website:t.get("website")||void 0};try{let r=await e.getIdToken(),t=await fetch("/api/partners/organizations",{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify(s)});if(t.ok)h(!1),w(),N({type:"success",text:"Organization created successfully"});else{let e=await t.json();N({type:"error",text:e.error||"Failed to create organization"})}}catch(e){N({type:"error",text:"Failed to create organization"})}finally{j(!1)}},C=async r=>{if(r.preventDefault(),!e||!b)return;j(!0),N(null);let t=new FormData(r.currentTarget),s={organizationId:b,action:"addAdmin",email:t.get("email"),role:t.get("role"),displayName:t.get("displayName")||void 0};try{let r=await e.getIdToken(),t=await fetch("/api/partners/organizations",{method:"PUT",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify(s)});if(t.ok)f(null),N({type:"success",text:"Admin added successfully"});else{let e=await t.json();N({type:"error",text:e.error||"Failed to add admin"})}}catch(e){N({type:"error",text:"Failed to add admin"})}finally{j(!1)}},z=async r=>{if(!e)return;let t="active"===r.status?"suspended":"active";try{let s=await e.getIdToken();(await fetch("/api/partners/organizations",{method:"PATCH",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({organizationId:r.id,status:t})})).ok&&(w(),N({type:"success",text:`Organization ${t}`}))}catch(e){N({type:"error",text:"Failed to update status"})}},A=async()=>{await d(),c.push("/partners/login")};return i||!o?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#FDFAF6]",children:(0,r.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-purple-500 border-t-transparent rounded-full"})}):(0,r.jsxs)("div",{className:"min-h-screen bg-[#FDFAF6]",children:[(0,r.jsx)("header",{className:"bg-white/80 backdrop-blur-md border-b border-gray-100 sticky top-0 z-40",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[(0,r.jsxs)(a.default,{href:"/",className:"flex items-center space-x-2",children:[(0,r.jsx)(l.default,{src:"/elevatia-logo.png",alt:"Elevatia Logo",width:32,height:32,className:"h-8 w-auto"}),(0,r.jsx)("span",{className:"text-xl font-semibold gradient-text",children:"Elevatia"})]}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm font-medium",children:"Super Admin"})})]}),(0,r.jsx)("button",{onClick:A,className:"text-sm text-gray-600 hover:text-gray-900 font-medium",children:"Sign Out"})]})})}),(0,r.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[v&&(0,r.jsx)("div",{className:`mb-6 px-4 py-3 rounded-xl text-sm ${"success"===v.type?"bg-green-50 border border-green-200 text-green-700":"bg-red-50 border border-red-200 text-red-700"}`,children:v.text}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Partner Organizations"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Manage all partner organizations and their access"})]}),(0,r.jsxs)("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white font-medium rounded-xl hover:from-purple-600 hover:to-pink-600 transition-all flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Organization"]})]}),u?(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-purple-500 border-t-transparent rounded-full"})}):0===m.length?(0,r.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl border border-gray-100 p-12 text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-2xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No organizations yet"}),(0,r.jsx)("p",{className:"text-gray-500 mb-4",children:"Create your first partner organization to get started."}),(0,r.jsx)("button",{onClick:()=>h(!0),className:"text-purple-600 font-medium hover:text-purple-700",children:"Create organization â†’"})]}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(e=>(0,r.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl border border-gray-100 p-6 hover:shadow-md transition-all",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-white font-bold text-lg",style:{backgroundColor:e.primaryColor||"#FF6B00"},children:e.name.charAt(0)}),(0,r.jsx)("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${"active"===e.status?"bg-green-100 text-green-700":"suspended"===e.status?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:e.status})]}),(0,r.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mb-3",children:["/",e.slug]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[(0,r.jsx)("span",{className:"px-2 py-1 bg-gray-100 rounded-lg text-xs text-gray-600 capitalize",children:e.tier}),(0,r.jsxs)("span",{className:"px-2 py-1 bg-gray-100 rounded-lg text-xs text-gray-600",children:[e.maxActiveUsers," users max"]})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500 mb-4",children:[(0,r.jsx)("p",{children:e.contactName}),(0,r.jsx)("p",{children:e.contactEmail})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 pt-4 border-t border-gray-100",children:[(0,r.jsx)(a.default,{href:`/partners/dashboard/${e.slug}`,className:"flex-1 py-2 px-3 bg-gray-100 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-200 transition-colors text-center",children:"View Dashboard"}),(0,r.jsx)("button",{onClick:()=>f(e.id),className:"py-2 px-3 bg-purple-100 text-purple-700 text-sm font-medium rounded-lg hover:bg-purple-200 transition-colors",children:"Add Admin"}),(0,r.jsx)("button",{onClick:()=>z(e),className:`py-2 px-3 text-sm font-medium rounded-lg transition-colors ${"active"===e.status?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:"active"===e.status?"Suspend":"Activate"})]})]},e.id))})]}),g&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Create Organization"}),(0,r.jsx)("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Organization Name"}),(0,r.jsx)("input",{type:"text",name:"name",required:!0,placeholder:"SurfSynergy",className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug"}),(0,r.jsx)("input",{type:"text",name:"slug",required:!0,placeholder:"surfsynergy",pattern:"[a-z0-9-]+",className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Name"}),(0,r.jsx)("input",{type:"text",name:"contactName",required:!0,placeholder:"John Smith",className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Email"}),(0,r.jsx)("input",{type:"email",name:"contactEmail",required:!0,placeholder:"john@company.com",className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tier"}),(0,r.jsxs)("select",{name:"tier",required:!0,className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent",defaultValue:"starter",children:[(0,r.jsx)("option",{value:"starter",children:"Starter (50 users)"}),(0,r.jsx)("option",{value:"growth",children:"Growth (500 users)"}),(0,r.jsx)("option",{value:"enterprise",children:"Enterprise (Unlimited)"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Active Users"}),(0,r.jsx)("input",{type:"number",name:"maxActiveUsers",required:!0,min:"1",defaultValue:"50",className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Code Duration (days)"}),(0,r.jsx)("input",{type:"number",name:"defaultCodeDurationDays",required:!0,min:"1",defaultValue:"30",className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Brand Color"}),(0,r.jsx)("input",{type:"color",name:"primaryColor",defaultValue:"#FF6B00",className:"w-full h-10 px-1 py-1 border border-gray-200 rounded-xl cursor-pointer"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website (optional)"}),(0,r.jsx)("input",{type:"url",name:"website",placeholder:"https://surfsynergy.com",className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (optional)"}),(0,r.jsx)("textarea",{name:"description",rows:2,placeholder:"About this organization...",className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none"})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,r.jsx)("button",{type:"button",onClick:()=>h(!1),className:"flex-1 py-2 px-4 border border-gray-200 text-gray-700 font-medium rounded-xl hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:y,className:"flex-1 py-2 px-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white font-medium rounded-xl hover:from-purple-600 hover:to-pink-600 transition-all disabled:opacity-50",children:y?"Creating...":"Create Organization"})]})]})]})}),b&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Add Partner Admin"}),(0,r.jsx)("button",{onClick:()=>f(null),className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,r.jsx)("input",{type:"email",name:"email",required:!0,placeholder:"admin@company.com",className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Must have an existing Elevatia account"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Name (optional)"}),(0,r.jsx)("input",{type:"text",name:"displayName",placeholder:"John Smith",className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),(0,r.jsxs)("select",{name:"role",className:"w-full px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent",defaultValue:"owner",children:[(0,r.jsx)("option",{value:"owner",children:"Owner (full access)"}),(0,r.jsx)("option",{value:"admin",children:"Admin (manage codes & paths)"}),(0,r.jsx)("option",{value:"viewer",children:"Viewer (read-only)"})]})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,r.jsx)("button",{type:"button",onClick:()=>f(null),className:"flex-1 py-2 px-4 border border-gray-200 text-gray-700 font-medium rounded-xl hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:y,className:"flex-1 py-2 px-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white font-medium rounded-xl hover:from-purple-600 hover:to-pink-600 transition-all disabled:opacity-50",children:y?"Adding...":"Add Admin"})]})]})]})})]})}function o(){return(0,r.jsx)(n.AuthProvider,{children:(0,r.jsx)(i,{})})}e.s(["default",()=>o,"dynamic",0,"force-dynamic"])}]);