(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,39827,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(18566),a=e.i(22016),l=e.i(57688),n=e.i(94690);e.i(51718);var i=e.i(18357),o=e.i(59141);function c(){let[e,a]=(0,r.useState)("email"),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(""),x=(0,s.useRouter)(),{signIn:h,signInWithApple:m,sendPhoneCode:p,verifyPhoneCode:g}=(0,n.useAuth)(),[f,b]=(0,r.useState)(""),[y,j]=(0,r.useState)(""),[v,w]=(0,r.useState)(""),[N,k]=(0,r.useState)(""),[C,S]=(0,r.useState)(!1),[A,F]=(0,r.useState)(null),E=(0,r.useRef)(null),M=(0,r.useRef)(null);(0,r.useEffect)(()=>("phone"===e&&M.current&&!E.current&&(E.current=new i.RecaptchaVerifier(o.auth,M.current,{size:"invisible",callback:()=>{}})),()=>{E.current&&(E.current.clear(),E.current=null)}),[e]);let P=e=>{e?x.push(`/partners/dashboard/${e}`):x.push("/admin/partners")},L=async e=>{e.preventDefault(),c(!0),u("");let t=await h(f,y);t.success?P(t.slug):(u(t.error||"Failed to sign in"),c(!1))},B=async()=>{c(!0),u("");let e=await m();e.success?P(e.slug):(u(e.error||"Failed to sign in with Apple"),c(!1))},D=async e=>{if(e.preventDefault(),!E.current)return void u("reCAPTCHA not initialized. Please refresh the page.");c(!0),u("");let t=v.trim();t.startsWith("+")||(t="+1"+t.replace(/\D/g,""));let r=await p(t,E.current);r.success&&r.confirmationResult?(F(r.confirmationResult),S(!0)):(u(r.error||"Failed to send verification code"),E.current&&(E.current.clear(),E.current=null)),c(!1)},R=async e=>{if(e.preventDefault(),!A)return void u("Please request a new verification code");c(!0),u("");let t=await g(A,N);t.success?P(t.slug):(u(t.error||"Invalid verification code"),c(!1))},V=()=>(0,t.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,t.jsxs)("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"phone"===e&&C?"Verifying...":"Signing in..."]});return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex rounded-xl bg-gray-100 p-1",children:[{id:"email",label:"Email",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})},{id:"apple",label:"Apple",icon:(0,t.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:(0,t.jsx)("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})})},{id:"phone",label:"Phone",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})}].map(r=>(0,t.jsxs)("button",{type:"button",onClick:()=>{a(r.id),u(""),S(!1),k(""),F(null)},className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-lg text-sm font-medium transition-all ${e===r.id?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[r.icon,r.label]},r.id))}),d&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm",children:d}),"email"===e&&(0,t.jsxs)("form",{onSubmit:L,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,t.jsx)("input",{id:"email",type:"email",value:f,onChange:e=>b(e.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all bg-white/80",placeholder:"you@company.com"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,t.jsx)("input",{id:"password",type:"password",value:y,onChange:e=>j(e.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all bg-white/80",placeholder:"••••••••"})]}),(0,t.jsx)("button",{type:"submit",disabled:l,className:"w-full py-3 px-4 bg-gradient-to-r from-orange-500 to-yellow-500 text-white font-semibold rounded-xl hover:from-orange-600 hover:to-yellow-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:l?(0,t.jsx)(V,{}):"Sign In with Email"})]}),"apple"===e&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 text-center",children:"Sign in with the same Apple ID you use in the Elevatia app."}),(0,t.jsx)("button",{type:"button",onClick:B,disabled:l,className:"w-full py-3 px-4 bg-black text-white font-semibold rounded-xl hover:bg-gray-800 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3",children:l?(0,t.jsx)(V,{}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:(0,t.jsx)("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})}),"Sign in with Apple"]})})]}),"phone"===e&&(0,t.jsx)("div",{className:"space-y-4",children:C?(0,t.jsxs)("form",{onSubmit:R,className:"space-y-4",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600 text-center",children:["Enter the 6-digit code sent to ",v]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"code",className:"block text-sm font-medium text-gray-700 mb-2",children:"Verification Code"}),(0,t.jsx)("input",{id:"code",type:"text",value:N,onChange:e=>k(e.target.value.replace(/\D/g,"").slice(0,6)),required:!0,maxLength:6,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all bg-white/80 text-center text-2xl tracking-widest font-mono",placeholder:"000000"})]}),(0,t.jsx)("button",{type:"submit",disabled:l||6!==N.length,className:"w-full py-3 px-4 bg-gradient-to-r from-orange-500 to-yellow-500 text-white font-semibold rounded-xl hover:from-orange-600 hover:to-yellow-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:l?(0,t.jsx)(V,{}):"Verify & Sign In"}),(0,t.jsx)("button",{type:"button",onClick:()=>{S(!1),k(""),F(null),E.current&&(E.current.clear(),E.current=null)},className:"w-full py-2 text-sm text-gray-600 hover:text-gray-900 transition-colors",children:"Use a different phone number"})]}):(0,t.jsxs)("form",{onSubmit:D,className:"space-y-4",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 text-center",children:"Enter the phone number linked to your Elevatia account."}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),(0,t.jsx)("input",{id:"phone",type:"tel",value:v,onChange:e=>w(e.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all bg-white/80",placeholder:"+1 (555) 123-4567"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Include country code (e.g., +1 for US)"})]}),(0,t.jsx)("button",{type:"submit",disabled:l,className:"w-full py-3 px-4 bg-gradient-to-r from-orange-500 to-yellow-500 text-white font-semibold rounded-xl hover:from-orange-600 hover:to-yellow-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:l?(0,t.jsx)(V,{}):"Send Verification Code"})]})}),(0,t.jsx)("div",{ref:M,id:"recaptcha-container"})]})}function d(){let{user:e,organization:i,loading:o,isSuperAdmin:d}=(0,n.useAuth)(),u=(0,s.useRouter)();return((0,r.useEffect)(()=>{!o&&e&&(d?u.push("/admin/partners"):i&&u.push(`/partners/dashboard/${i.slug}`))},[e,i,o,d,u]),o)?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#FDFAF6]",children:(0,t.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-orange-500 border-t-transparent rounded-full"})}):(0,t.jsxs)("div",{className:"min-h-screen bg-[#FDFAF6] flex flex-col",children:[(0,t.jsx)("nav",{className:"bg-white/80 backdrop-blur-md border-b border-gray-100",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,t.jsxs)(a.default,{href:"/",className:"flex items-center space-x-2",children:[(0,t.jsx)(l.default,{src:"/elevatia-logo.png",alt:"Elevatia Logo",width:32,height:32,className:"h-8 w-auto"}),(0,t.jsx)("span",{className:"text-xl font-semibold gradient-text",children:"Elevatia"})]}),(0,t.jsx)(a.default,{href:"/partners",className:"text-gray-600 hover:text-gray-900 text-sm font-medium transition-colors",children:"← Back to Partners"})]})})}),(0,t.jsx)("div",{className:"flex-1 flex items-center justify-center px-4 py-12",children:(0,t.jsx)("div",{className:"w-full max-w-md",children:(0,t.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-100 p-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-orange-100 to-yellow-100 rounded-2xl mb-4",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Partner Dashboard"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Sign in to manage your Elevatia partnership"})]}),(0,t.jsx)(c,{}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Not a partner yet?"," ",(0,t.jsx)(a.default,{href:"/partners",className:"text-orange-600 hover:text-orange-700 font-medium",children:"Learn more"})]})})]})})})]})}function u(){return(0,t.jsx)(n.AuthProvider,{children:(0,t.jsx)(d,{})})}e.s(["default",()=>u,"dynamic",0,"force-dynamic"],39827)}]);