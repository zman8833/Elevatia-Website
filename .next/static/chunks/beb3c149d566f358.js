(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,39827,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(18566),s=e.i(22016),l=e.i(57688),n=e.i(94690);e.i(51718);var i=e.i(18357),o=e.i(59141);function d(){let[e,s]=(0,r.useState)("email"),[l,d]=(0,r.useState)("login"),[c,u]=(0,r.useState)(!1),[x,m]=(0,r.useState)(""),h=(0,a.useRouter)(),{signIn:p,signInWithApple:g,sendPhoneCode:b,verifyPhoneCode:f,linkAccountWithEmail:y}=(0,n.useAuth)(),[j,v]=(0,r.useState)(""),[w,N]=(0,r.useState)(""),[k,C]=(0,r.useState)(""),[S,F]=(0,r.useState)(""),[L,A]=(0,r.useState)(!1),[P,E]=(0,r.useState)(null),M=(0,r.useRef)(null),B=(0,r.useRef)(null),[D,R]=(0,r.useState)(null),[V,z]=(0,r.useState)(""),[q,H]=(0,r.useState)("");(0,r.useEffect)(()=>("phone"===e&&B.current&&!M.current&&(M.current=new i.RecaptchaVerifier(o.auth,B.current,{size:"invisible",callback:()=>{}})),()=>{M.current&&(M.current.clear(),M.current=null)}),[e]);let I=e=>{e?h.push(`/partners/dashboard/${e}`):h.push("/admin/partners")},W=async e=>{e.preventDefault(),u(!0),m("");let t=await p(j,w);t.success?I(t.slug):(m(t.error||"Failed to sign in"),u(!1))},T=async()=>{u(!0),m("");let e=await g();e.success?I(e.slug):(e.needsLinking&&e.pendingCredential?(R(e.pendingCredential),d("link-account")):m(e.error||"Failed to sign in with Apple"),u(!1))},U=async e=>{if(e.preventDefault(),!M.current)return void m("reCAPTCHA not initialized. Please refresh the page.");u(!0),m("");let t=k.trim();t.startsWith("+")||(t="+1"+t.replace(/\D/g,""));let r=await b(t,M.current);r.success&&r.confirmationResult?(E(r.confirmationResult),A(!0)):(m(r.error||"Failed to send verification code"),M.current&&(M.current.clear(),M.current=null)),u(!1)},$=async e=>{if(e.preventDefault(),!P)return void m("Please request a new verification code");u(!0),m("");let t=await f(P,S);t.success?I(t.slug):(t.needsLinking&&t.pendingCredential?(R(t.pendingCredential),d("link-account")):m(t.error||"Invalid verification code"),u(!1))},K=async e=>{if(e.preventDefault(),!D)return void m("No pending credential. Please try signing in again.");u(!0),m("");let t=await y(V,q,D);t.success?I(t.slug):(m(t.error||"Failed to link accounts"),u(!1))},O=()=>(0,t.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,t.jsxs)("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"link-account"===l?"Linking...":"phone"===e&&L?"Verifying...":"Signing in..."]});return"link-account"===l?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Link Your Account"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Sign in with your existing partner email and password to link this sign-in method to your account."})]}),x&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm",children:x}),(0,t.jsxs)("form",{onSubmit:K,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"link-email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Partner Email"}),(0,t.jsx)("input",{id:"link-email",type:"email",value:V,onChange:e=>z(e.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all bg-white/80",placeholder:"you@company.com"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"link-password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,t.jsx)("input",{id:"link-password",type:"password",value:q,onChange:e=>H(e.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all bg-white/80",placeholder:"••••••••"})]}),(0,t.jsx)("button",{type:"submit",disabled:c,className:"w-full py-3 px-4 bg-gradient-to-r from-orange-500 to-yellow-500 text-white font-semibold rounded-xl hover:from-orange-600 hover:to-yellow-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:c?(0,t.jsx)(O,{}):"Link & Sign In"}),(0,t.jsx)("button",{type:"button",onClick:()=>{d("login"),R(null),z(""),H(""),m("")},className:"w-full py-2 text-sm text-gray-600 hover:text-gray-900 transition-colors",children:"Cancel"})]})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex rounded-xl bg-gray-100 p-1",children:[{id:"email",label:"Email",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})},{id:"apple",label:"Apple",icon:(0,t.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:(0,t.jsx)("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})})},{id:"phone",label:"Phone",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})}].map(r=>(0,t.jsxs)("button",{type:"button",onClick:()=>{s(r.id),m(""),A(!1),F(""),E(null)},className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-lg text-sm font-medium transition-all ${e===r.id?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[r.icon,r.label]},r.id))}),x&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm",children:x}),"email"===e&&(0,t.jsxs)("form",{onSubmit:W,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,t.jsx)("input",{id:"email",type:"email",value:j,onChange:e=>v(e.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all bg-white/80",placeholder:"you@company.com"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,t.jsx)("input",{id:"password",type:"password",value:w,onChange:e=>N(e.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all bg-white/80",placeholder:"••••••••"})]}),(0,t.jsx)("button",{type:"submit",disabled:c,className:"w-full py-3 px-4 bg-gradient-to-r from-orange-500 to-yellow-500 text-white font-semibold rounded-xl hover:from-orange-600 hover:to-yellow-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:c?(0,t.jsx)(O,{}):"Sign In with Email"})]}),"apple"===e&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 text-center",children:"Sign in with the same Apple ID you use in the Elevatia app."}),(0,t.jsx)("button",{type:"button",onClick:T,disabled:c,className:"w-full py-3 px-4 bg-black text-white font-semibold rounded-xl hover:bg-gray-800 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3",children:c?(0,t.jsx)(O,{}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:(0,t.jsx)("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})}),"Sign in with Apple"]})})]}),"phone"===e&&(0,t.jsx)("div",{className:"space-y-4",children:L?(0,t.jsxs)("form",{onSubmit:$,className:"space-y-4",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600 text-center",children:["Enter the 6-digit code sent to ",k]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"code",className:"block text-sm font-medium text-gray-700 mb-2",children:"Verification Code"}),(0,t.jsx)("input",{id:"code",type:"text",value:S,onChange:e=>F(e.target.value.replace(/\D/g,"").slice(0,6)),required:!0,maxLength:6,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all bg-white/80 text-center text-2xl tracking-widest font-mono",placeholder:"000000"})]}),(0,t.jsx)("button",{type:"submit",disabled:c||6!==S.length,className:"w-full py-3 px-4 bg-gradient-to-r from-orange-500 to-yellow-500 text-white font-semibold rounded-xl hover:from-orange-600 hover:to-yellow-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:c?(0,t.jsx)(O,{}):"Verify & Sign In"}),(0,t.jsx)("button",{type:"button",onClick:()=>{A(!1),F(""),E(null),M.current&&(M.current.clear(),M.current=null)},className:"w-full py-2 text-sm text-gray-600 hover:text-gray-900 transition-colors",children:"Use a different phone number"})]}):(0,t.jsxs)("form",{onSubmit:U,className:"space-y-4",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 text-center",children:"Enter the phone number linked to your Elevatia account."}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),(0,t.jsx)("input",{id:"phone",type:"tel",value:k,onChange:e=>C(e.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all bg-white/80",placeholder:"+1 (555) 123-4567"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Include country code (e.g., +1 for US)"})]}),(0,t.jsx)("button",{type:"submit",disabled:c,className:"w-full py-3 px-4 bg-gradient-to-r from-orange-500 to-yellow-500 text-white font-semibold rounded-xl hover:from-orange-600 hover:to-yellow-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:c?(0,t.jsx)(O,{}):"Send Verification Code"})]})}),(0,t.jsx)("div",{ref:B,id:"recaptcha-container"})]})}function c(){let{user:e,organization:i,loading:o,isSuperAdmin:c}=(0,n.useAuth)(),u=(0,a.useRouter)();return((0,r.useEffect)(()=>{!o&&e&&(c?u.push("/admin/partners"):i&&u.push(`/partners/dashboard/${i.slug}`))},[e,i,o,c,u]),o)?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#FDFAF6]",children:(0,t.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-orange-500 border-t-transparent rounded-full"})}):(0,t.jsxs)("div",{className:"min-h-screen bg-[#FDFAF6] flex flex-col",children:[(0,t.jsx)("nav",{className:"bg-white/80 backdrop-blur-md border-b border-gray-100",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,t.jsxs)(s.default,{href:"/",className:"flex items-center space-x-2",children:[(0,t.jsx)(l.default,{src:"/elevatia-logo.png",alt:"Elevatia Logo",width:32,height:32,className:"h-8 w-auto"}),(0,t.jsx)("span",{className:"text-xl font-semibold gradient-text",children:"Elevatia"})]}),(0,t.jsx)(s.default,{href:"/partners",className:"text-gray-600 hover:text-gray-900 text-sm font-medium transition-colors",children:"← Back to Partners"})]})})}),(0,t.jsx)("div",{className:"flex-1 flex items-center justify-center px-4 py-12",children:(0,t.jsx)("div",{className:"w-full max-w-md",children:(0,t.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-100 p-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-orange-100 to-yellow-100 rounded-2xl mb-4",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Partner Dashboard"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Sign in to manage your Elevatia partnership"})]}),(0,t.jsx)(d,{}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Not a partner yet?"," ",(0,t.jsx)(s.default,{href:"/partners",className:"text-orange-600 hover:text-orange-700 font-medium",children:"Learn more"})]})})]})})})]})}function u(){return(0,t.jsx)(n.AuthProvider,{children:(0,t.jsx)(c,{})})}e.s(["default",()=>u,"dynamic",0,"force-dynamic"],39827)}]);